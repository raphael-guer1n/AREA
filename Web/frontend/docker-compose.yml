services:
  client_web:
    build:
      context: .
      dockerfile: Dockerfile
      args:
        NODE_ENV: production
        API_BASE_URL: ${API_BASE_URL:-https://api.area-connect.cloud/area_auth_api}
        NEXT_PUBLIC_API_BASE_URL: ${NEXT_PUBLIC_API_BASE_URL:-https://api.area-connect.cloud/area_auth_api}
        AREA_API_BASE_URL: ${AREA_API_BASE_URL:-https://api.area-connect.cloud/area_area_api}
        NEXT_PUBLIC_AREA_API_BASE_URL: ${NEXT_PUBLIC_AREA_API_BASE_URL:-https://api.area-connect.cloud/area_area_api}
        SERVICES_API_BASE_URL: ${SERVICES_API_BASE_URL:-https://api.area-connect.cloud/area_service_api}
        NEXT_PUBLIC_SERVICES_API_BASE_URL: ${NEXT_PUBLIC_SERVICES_API_BASE_URL:-https://api.area-connect.cloud/area_service_api}
    environment:
      NODE_ENV: production
      PORT: ${WEB_PORT:-8081}
      HOSTNAME: 0.0.0.0
      API_BASE_URL: ${API_BASE_URL:-https://api.area-connect.cloud/area_auth_api}
      NEXT_PUBLIC_API_BASE_URL: ${NEXT_PUBLIC_API_BASE_URL:-https://api.area-connect.cloud/area_auth_api}
      AREA_API_BASE_URL: ${AREA_API_BASE_URL:-https://api.area-connect.cloud/area_area_api}
      NEXT_PUBLIC_AREA_API_BASE_URL: ${NEXT_PUBLIC_AREA_API_BASE_URL:-https://api.area-connect.cloud/area_area_api}
      SERVICES_API_BASE_URL: ${SERVICES_API_BASE_URL:-https://api.area-connect.cloud/area_service_api}
      NEXT_PUBLIC_SERVICES_API_BASE_URL: ${NEXT_PUBLIC_SERVICES_API_BASE_URL:-https://api.area-connect.cloud/area_service_api}
      NEXT_PUBLIC_SITE_URL: ${NEXT_PUBLIC_SITE_URL:-http://localhost:8081}
      NEXT_PUBLIC_OAUTH_CALLBACK_BASE: ${NEXT_PUBLIC_OAUTH_CALLBACK_BASE:-http://localhost:8081}
      COOKIE_SECURE: ${COOKIE_SECURE:-false}
      SESSION_COOKIE_SECURE: ${SESSION_COOKIE_SECURE:-false}
      NEXT_FONT_GOOGLE_DISABLE: ${NEXT_FONT_GOOGLE_DISABLE:-1}
      APK_FILE_PATH: /apk/client.apk
    ports:
      - "${WEB_PORT:-8081}:${WEB_PORT:-8081}"
    volumes:
      - apk_dist:/apk
    restart: unless-stopped

volumes:
  apk_dist:
